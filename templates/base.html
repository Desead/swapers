{% load static i18n i18n_extras %}
<!doctype html>
<html lang="{{ CUR_LANG }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{% block title %}{{ SEO_TITLE }}{% endblock %}</title>

    {% if FAVICON_URL %}
        <link rel="icon" href="{{ FAVICON_URL }}">
    {% endif %}

    {% if SEO_DESCRIPTION %}
        <meta name="description" content="{{ SEO_DESCRIPTION }}">{% endif %}
    {% if SEO_KEYWORDS %}
        <meta name="keywords" content="{{ SEO_KEYWORDS }}">{% endif %}
    {% if BLOCK_INDEXING %}
        <meta name="robots" content="noindex, nofollow">{% endif %}

    {% if FAVICON_URL %}
        <link rel="icon" href="{{ FAVICON_URL }}">{% endif %}

    <link rel="canonical" href="{{ CANONICAL_URL }}">
    {% for code, href in HREFLANGS.items %}
        <link rel="alternate" hreflang="{{ code }}" href="{{ href }}">
    {% endfor %}
    <link rel="alternate" hreflang="x-default" href="{{ HREFLANGS.en|default:CANONICAL_URL }}">

    {# Open Graph #}
    {% if OG_ENABLED %}
        <meta property="og:site_name" content="{{ OG_SITE_NAME }}">
        <meta property="og:type" content="{{ OG_TYPE }}">
        <meta property="og:url" content="{{ CANONICAL_URL }}">
        <meta property="og:title" content="{{ OG_TITLE }}">
        {% if OG_DESCRIPTION %}
            <meta property="og:description" content="{{ OG_DESCRIPTION }}">{% endif %}
        {% if OG_IMAGE_URL %}
            <meta property="og:image" content="{{ OG_IMAGE_URL }}">
            {% if OG_IMAGE_ALT %}
                <meta property="og:image:alt" content="{{ OG_IMAGE_ALT }}">{% endif %}
            {% if OG_IMAGE_WIDTH %}
                <meta property="og:image:width" content="{{ OG_IMAGE_WIDTH }}">{% endif %}
            {% if OG_IMAGE_HEIGHT %}
                <meta property="og:image:height" content="{{ OG_IMAGE_HEIGHT }}">{% endif %}
        {% endif %}
        {% if OG_LOCALE %}
            <meta property="og:locale" content="{{ OG_LOCALE }}">{% endif %}
        {% for alt in OG_LOCALE_ALTS %}
            <meta property="og:locale:alternate" content="{{ alt }}">
        {% endfor %}
    {% endif %}

    {# Twitter Cards #}
    {% if TW_ENABLED %}
        <meta name="twitter:card" content="{{ TW_CARD }}">
        {% if TW_SITE %}
            <meta name="twitter:site" content="@{{ TW_SITE }}">{% endif %}
        {% if TW_CREATOR %}
            <meta name="twitter:creator" content="@{{ TW_CREATOR }}">{% endif %}
        <meta name="twitter:title" content="{{ OG_TITLE }}">
        {% if OG_DESCRIPTION %}
            <meta name="twitter:description" content="{{ OG_DESCRIPTION }}">{% endif %}
        {% if TW_IMAGE_URL %}
            <meta name="twitter:image" content="{{ TW_IMAGE_URL }}">{% endif %}
    {% endif %}

    {# JSON-LD (site-wide) #}
    {% if JSONLD_ENABLED %}
        {% if JSONLD_ORG and JSONLD_ORG != '{}' %}
            <script type="application/ld+json" nonce="{{ request.csp_nonce }}">{{ JSONLD_ORG|safe }}</script>
        {% endif %}
        {% if JSONLD_WEBSITE and JSONLD_WEBSITE != '{}' %}
            <script type="application/ld+json" nonce="{{ request.csp_nonce }}">{{ JSONLD_WEBSITE|safe }}</script>
        {% endif %}
    {% endif %}

    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    {% block extra_head %}{% endblock %}
    <script src="{% static 'js/deeplink.js' %}" defer></script>
</head>
<body>
{% include "includes/_nav.html" %}
<main class="container">
    {% include "includes/_messages.html" %}
    {% block content %}{% endblock %}
</main>
{% include "includes/_footer.html" %}
{% block extra_js %}{% endblock %}
</body>
</html>
