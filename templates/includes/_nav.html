{% load i18n %}
{% get_current_language as CUR_LANG %}

<header>
    <div class="container">
        <nav>
            <a href="{% url 'home' %}">{% trans "Главная" %}</a>
            {% if user.is_authenticated %}
                <a href="{% url 'dashboard' %}">{% trans "Личный кабинет" %}</a>
                <a href="{% url 'account_settings' %}">{% trans "Настройки" %}</a>
                <a href="{% url 'account_change_password' %}">{% trans "Сменить пароль" %}</a>
                <a href="{% url 'account_email' %}">{% trans "Email-адреса" %}</a>
                {% if user.is_staff %}
                    <a href="{% url 'twofa_setup' %}">{% trans "Безопасность (2FA)" %}</a>
                {% endif %}
                <a href="{% url 'account_delete' %}">{% trans "Удалить аккаунт" %}</a>
                <a href="{% url 'account_logout' %}">{% trans "Выйти" %}</a>
            {% else %}
                <a href="{% url 'account_login' %}">{% trans "Войти" %}</a>
                <a href="{% url 'account_signup' %}">{% trans "Регистрация" %}</a>
                <a href="{% url 'account_reset_password' %}">{% trans "Забыли пароль?" %}</a>
            {% endif %}
        </nav>

        <div class="muted" style="margin-top:8px">
            {% if user.is_authenticated %}
                {% trans "Вы вошли как" %} <strong>{{ user.email }}</strong>
                {% if user.is_staff %}
                    · {% trans "Админка" %}: <a href="{% url 'admin:index' %}">/{{ site_setup.admin_path }}/</a>
                {% endif %}
            {% else %}
                {% trans "Вы вошли как" %} <strong>{% trans "Анонимный пользователь" %}</strong>
            {% endif %}
        </div>

        <form action="{% url 'set_language' %}" method="post" style="display:inline">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.get_full_path }}">
            <select name="language" onchange="this.form.submit()">
                {% get_available_languages as LANGS %}
                {% get_language_info_list for LANGS as languages %}
                {% for lang in languages %}
                    <option value="{{ lang.code }}"{% if lang.code == CUR_LANG %} selected{% endif %}>
                        {{ lang.name_local }}
                    </option>
                {% endfor %}
            </select>
        </form>
    </div>
</header>
